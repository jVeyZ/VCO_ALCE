<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Asistente de Configuración de Exámenes</title>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap"
		rel="stylesheet" />
	<style>
		:root {
			color-scheme: light;
			--bg: #f8f9fa;
			--card-bg: #ffffff;
			--card-border: #e2e8f0;
			--accent: #2563eb;
			--accent-soft: #dbeafe;
			--text: #0f172a;
			--muted: #64748b;
			--danger: #dc2626;
			--success: #16a34a;
			font-family: 'Space Grotesk', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
		}

		* {
			box-sizing: border-box;
		}

		body {
			margin: 0;
			min-height: 100vh;
			background: var(--bg);
			color: var(--text);
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 2rem;
		}

		.app-shell {
			width: min(1200px, 100%);
			background: var(--card-bg);
			border: 1px solid var(--card-border);
			border-radius: 8px;
			padding: 2.5rem;
			box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
		}

		header {
			display: flex;
			justify-content: space-between;
			align-items: baseline;
			gap: 1rem;
			flex-wrap: wrap;
			margin-bottom: 2rem;
		}

		header h1 {
			margin: 0;
			font-size: clamp(2rem, 3vw, 2.6rem);
			letter-spacing: -0.02em;
		}

		header p {
			margin: 0;
			color: var(--muted);
		}

		button {
			border: none;
			cursor: pointer;
			font: inherit;
			transition: all 150ms ease;
			padding: 0.6rem 1.2rem;
		}

		button:hover {
			opacity: 0.9;
		}

		.wizard-shell {
			display: grid;
			grid-template-columns: 280px 1fr;
			gap: 2rem;
		}

		.step-indicator {
			list-style: none;
			padding: 0;
			margin: 0;
			display: flex;
			flex-direction: column;
			gap: 1.2rem;
		}

		.step-pin {
			display: flex;
			align-items: center;
			gap: 1rem;
			padding: 0.75rem 1rem;
			border-radius: 4px;
			border: 1px solid transparent;
			background: transparent;
			transition: all 150ms ease;
		}

		.step-pin.active {
			border-color: var(--accent);
			background: var(--accent-soft);
		}

		.step-number {
			width: 32px;
			height: 32px;
			border-radius: 4px;
			border: 1px solid var(--card-border);
			display: grid;
			place-items: center;
			font-weight: 600;
			font-size: 0.875rem;
			color: var(--muted);
			background: #ffffff;
		}

		.step-pin.active .step-number {
			border-color: var(--accent);
			background: var(--accent);
			color: #ffffff;
		}

		.step-pin span {
			font-weight: 500;
			color: var(--muted);
		}

		.step-pin.active span {
			color: var(--text);
		}

		.panel {
			border-radius: 4px;
			border: 1px solid var(--card-border);
			background: var(--card-bg);
			padding: 2rem;
			min-height: 600px;
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
		}

		.step {
			display: none;
			flex-direction: column;
			gap: 1.5rem;
		}

		.step.active {
			display: flex;
		}

		.fields {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
			gap: 1.3rem;
		}

		label {
			display: flex;
			flex-direction: column;
			gap: 0.4rem;
			font-size: 0.9rem;
			color: var(--muted);
		}

		input,
		select,
		textarea {
			background: #ffffff;
			border: 1px solid var(--card-border);
			border-radius: 4px;
			padding: 0.625rem 0.875rem;
			color: var(--text);
			font: inherit;
			font-size: 0.9375rem;
			transition: all 150ms ease;
		}

		input:focus,
		select:focus,
		textarea:focus {
			outline: none;
			border-color: var(--accent);
			box-shadow: 0 0 0 3px var(--accent-soft);
		}

		border-color: var(--accent);
		}

		.card-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));

			.type-card,
			.question-card {
				border: 1px solid var(--card-border);
				border-radius: 4px;
				padding: 1.2rem;
				background: #ffffff;
			}

			border-radius: 22px;
			padding: 1.2rem;
			background: rgba(10, 15, 30, 0.55);
		}

		.type-card h4,
		.question-card h4 {
			margin-top: 0;
			margin-bottom: 0.6rem;
			font-size: 1.05rem;
		}

		.inline-field {
			display: flex;
			gap: 0.8rem;

			button,
			.ghost-btn {
				border: 1px solid var(--card-border);
				border-radius: 4px;
				padding: 0.625rem 1.25rem;
				font: inherit;
				font-weight: 600;
				font-size: 0.9375rem;
				cursor: pointer;
				transition: all 150ms ease;
			}

			button.primary {
				background: var(--accent);
				border-color: var(--accent);
				color: white;
			}

			button.primary:hover:not(:disabled) {
				background: #1d4ed8;
				border-color: #1d4ed8;
			}

			button:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}

			ghost-btn:hover {
				background: #f8f9fa;
			}

			ghost-btn {
				background: rgba(148, 163, 184, 0.15);
				color: var(--text);
			}

			button:disabled {
				opacity: 0.4;
				cursor: not-allowed;
				transform: none;
			}

			button:not(:disabled):active {
				.question-builder {
					border: 1px dashed var(--card-border);
					border-radius: 4px;
					padding: 1.5rem;
					display: flex;
					flex-direction: column;
					gap: 1rem;
					background: #fafafa;
				}

				gap: 1rem;
			}

			.question-builder {
				border: 1px dashed rgba(148, 163, 184, 0.35);
				border-radius: 24px;

				.question-list {
					max-height: 220px;
					overflow-y: auto;
					border: 1px solid var(--card-border);
					border-radius: 4px;
					padding: 1rem;
					display: flex;
					flex-direction: column;
					gap: 0.8rem;
					background: #ffffff;
				}

				.question-pill {
					display: flex;
					justify-content: space-between;
					align-items: center;
					border-radius: 4px;
					padding: 0.75rem 1rem;
					background: #f8f9fa;
					border: 1px solid var(--card-border);
					font-size: 0.9375rem;
				}

				gap: 0.8rem;
			}

			.question-pill {
				display: flex;

				.output-shell {
					border-radius: 4px;
					border: 1px solid var(--card-border);
					background: #fafafa;
					padding: 1rem;
				}

				font-size: 0.95rem;
			}

			.pill-meta {
				font-size: 0.8rem;
				color: var(--muted);
			}

			.output-shell {
				border-radius: 20px;
				border: 1px solid rgba(148, 163, 184, 0.25);
				background: rgba(0, 0, 0, 0.25);
				padding: 1rem;
			}

			pre {
				margin: 0;
				max-height: 260px;
				overflow: auto;
			}

			@media (max-width: 960px) {
				.wizard-shell {
					grid-template-columns: 1fr;
				}

				.panel {
					min-height: auto;
				}

				header {
					flex-direction: column;
					align-items: flex-start;
				}
			}

			@media (max-width: 600px) {
				body {
					padding: 1rem;
				}

				.app-shell {
					padding: 1.5rem;
				}

				.fields {
					grid-template-columns: 1fr;
				}

				.nav-controls {
					flex-direction: column-reverse;
				}
			}
	</style>
</head>

<body>
	<div class="app-shell">
		<header>
			<div>
				<h1>Asistente de Configuración</h1>
				<p>Generador automático de plantillas de exámenes ALCE.</p>
			</div>
			<button type="button" class="ghost-btn" id="resetWizard">Reiniciar Asistente</button>
		</header>

		<div class="wizard-shell">
			<ol class="step-indicator" id="stepIndicator">
				<li class="step-pin active"><span class="step-number">01</span><span>Asignatura y Examen</span></li>
				<li class="step-pin"><span class="step-number">02</span><span>Variantes del Examen</span></li>
				<li class="step-pin"><span class="step-number">03</span><span>Volumen de Preguntas</span></li>
				<li class="step-pin"><span class="step-number">04</span><span>Banco de Preguntas</span></li>
				<li class="step-pin"><span class="step-number">05</span><span>Revisión y JSON</span></li>
			</ol>

			<section class="panel">
				<form id="wizardForm">
					<div class="step active" data-step="0">
						<h2>Asignatura y Examen</h2>
						<div class="fields">
							<label>Nombre de la Asignatura
								<input type="text" name="subjectName" placeholder="Cálculo Avanzado" required />
							</label>
							<label>Código de Asignatura
								<input type="text" name="subjectCode" placeholder="MATH-401" required />
							</label>
							<label>Nombre del Examen
								<input type="text" name="examName" placeholder="Parcial II" required />
							</label>
							<label>Escuela / Organización
								<input type="text" name="schoolName" placeholder="Academia STEM Aurora" required />
							</label>
						</div>
					</div>

					<div class="step" data-step="1">
						<h2>Variantes del Examen</h2>
						<p class="muted">Decide cuántas versiones únicas necesitas y cómo se comportan las preguntas
							para cada
							variante.</p>
						<div class="fields">
							<label>¿Cuántos tipos de examen únicos?
								<input type="number" min="1" max="10" name="variantCount" id="variantCount" value="1" />
							</label>
						</div>
						<button type="button" class="secondary" id="buildVariants">Generar Tarjetas de Tipos</button>
						<div class="card-grid" id="variantGrid"></div>
					</div>

					<div class="step" data-step="2">
						<h2>Volumen de Preguntas</h2>
						<p class="muted">Indícanos cuántas preguntas debe incluir cada versión del examen.</p>
						<div class="fields">
							<label>Preguntas por tipo de examen
								<input type="number" min="1" max="200" name="questionAmount" id="questionAmount"
									placeholder="25" />
							</label>
						</div>
					</div>

					<div class="step" data-step="3">
						<h2>Banco de Preguntas</h2>
						<p class="muted">Añade todas las preguntas posibles.</p>
						<div class="question-builder">
							<div class="fields">
								<label>Enunciado de la Pregunta
									<textarea id="questionPrompt"
										placeholder="Enuncia el Teorema Fundamental del Cálculo."></textarea>
								</label>
								<label>Tipo de Pregunta
									<select id="questionType">
										<option value="mcq">Opción Múltiple (A-D)</option>
										<option value="numeric">Numérica (sin decimales)</option>
									</select>
								</label>
								<div id="mcqFields">
									<label>Opción A
										<input type="text" id="optA" placeholder="Opción de respuesta A" />
									</label>
									<label>Opción B
										<input type="text" id="optB" placeholder="Opción de respuesta B" />
									</label>
									<label>Opción C
										<input type="text" id="optC" placeholder="Opción de respuesta C" />
									</label>
									<label>Opción D
										<input type="text" id="optD" placeholder="Opción de respuesta D" />
									</label>
									<label>Opción Correcta
										<select id="correctOption">
											<option value="A">A</option>
											<option value="B">B</option>
											<option value="C">C</option>
											<option value="D">D</option>
										</select>
									</label>
								</div>
								<div id="numericFields" style="display:none;">
									<label>Respuesta Entera Correcta
										<input type="number" step="1" id="numericAnswer" placeholder="42" />
									</label>
								</div>
							</div>
							<button class="primary" type="button" id="addQuestion">Añadir Pregunta</button>
						</div>
						<div>
							<h3>Banco de Preguntas</h3>
							<div class="question-list" id="questionList">
								<p class="pill-meta">Aún no se han añadido preguntas.</p>
							</div>
						</div>
					</div>

					<div class="step" data-step="4">
						<h2>Revisión y Generación de JSON</h2>
						<button class="primary" type="button" id="generateJson">Generar Plantilla</button>
						<div class="output-shell">
							<pre id="jsonOutput">// La salida JSON aparecerá aquí.</pre>
						</div>
						<button class="secondary" type="button" id="downloadJson">Descargar JSON</button>
						<div class="fields">
							<label>URL Base de la API
								<input type="text" id="apiBaseInput" placeholder="http://localhost:5500" />
							</label>
							<label>Elige la variante del examen para el PDF
								<select id="variantSelect" disabled>
									<option value="">Añade variantes primero</option>
								</select>
							</label>
						</div>
						<button class="primary" type="button" id="requestPdf" disabled>Generar Hoja de Respuestas
							PDF</button>
						<p class="pill-meta" id="pdfStatus">El estado del PDF aparecerá aquí.</p>
					</div>
				</form>

				<div class="nav-controls">
					<button type="button" class="secondary" id="prevStep" disabled>Atrás</button>
					<button type="button" class="primary" id="nextStep">Siguiente</button>
				</div>
			</section>
		</div>
	</div>

	<script>
		const steps = Array.from(document.querySelectorAll('.step'));
		const stepPins = Array.from(document.querySelectorAll('.step-pin'));
		const nextBtn = document.getElementById('nextStep');
		const prevBtn = document.getElementById('prevStep');
		const buildVariantsBtn = document.getElementById('buildVariants');
		const variantGrid = document.getElementById('variantGrid');
		const questionTypeSelect = document.getElementById('questionType');
		const mcqFields = document.getElementById('mcqFields');
		const numericFields = document.getElementById('numericFields');
		const addQuestionBtn = document.getElementById('addQuestion');
		const questionList = document.getElementById('questionList');
		const generateJsonBtn = document.getElementById('generateJson');
		const downloadJsonBtn = document.getElementById('downloadJson');
		const jsonOutput = document.getElementById('jsonOutput');
		const resetWizardBtn = document.getElementById('resetWizard');
		const variantSelect = document.getElementById('variantSelect');
		const requestPdfBtn = document.getElementById('requestPdf');
		const pdfStatus = document.getElementById('pdfStatus');
		const apiBaseInput = document.getElementById('apiBaseInput');
		const defaultApiBase = window.API_BASE_URL || (window.location.origin === 'null' ? 'http://localhost:5500' : window.location.origin);
		let currentStep = 0;
		const appState = {
			subjectName: '',
			subjectCode: '',
			examName: '',
			schoolName: '',
			examTypes: [],
			questionAmount: null,
			questionBank: []
		};

		function getApiBase() {
			return (apiBaseInput.value && apiBaseInput.value.trim()) || defaultApiBase;
		}

		function setStep(index) {
			currentStep = Math.max(0, Math.min(steps.length - 1, index));
			steps.forEach((step, i) => step.classList.toggle('active', i === currentStep));
			stepPins.forEach((pin, i) => pin.classList.toggle('active', i === currentStep));
			prevBtn.disabled = currentStep === 0;
			nextBtn.textContent = currentStep === steps.length - 1 ? 'Finalizar' : 'Siguiente';
		}

		function validateStep(stepIndex) {
			switch (stepIndex) {
				case 0:
					const formData = new FormData(document.getElementById('wizardForm'));
					const fields = ['subjectName', 'subjectCode', 'examName', 'schoolName'];
					return fields.every(field => formData.get(field)?.trim());
				case 1:
					return appState.examTypes.length > 0;
				case 2:
					return Number(document.getElementById('questionAmount').value) > 0;
				case 3:
					return appState.questionBank.length > 0;
				default:
					return true;
			}
		}

		function syncGeneralInfo() {
			const formData = new FormData(document.getElementById('wizardForm'));
			appState.subjectName = formData.get('subjectName')?.trim() || '';
			appState.subjectCode = formData.get('subjectCode')?.trim() || '';
			appState.examName = formData.get('examName')?.trim() || '';
			appState.schoolName = formData.get('schoolName')?.trim() || '';
		}

		function createVariantCards(count) {
			variantGrid.innerHTML = '';
			appState.examTypes = [];
			const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
			const total = Math.min(Math.max(1, count), 10);
			for (let i = 0; i < total; i += 1) {
				const card = document.createElement('div');
				card.className = 'type-card';
				const label = document.createElement('label');
				label.textContent = 'Etiqueta de Variante';
				const input = document.createElement('input');
				input.type = 'text';
				input.value = `Type ${letters[i] || i + 1}`;
				input.dataset.variantIndex = i;

				const strategyLabel = document.createElement('label');
				strategyLabel.textContent = 'Estrategia de Preguntas';
				const select = document.createElement('select');
				select.dataset.variantIndex = i;
				const options = [
					{ value: 'shuffle', text: 'Same questions, shuffle order' },
					{ value: 'random', text: 'Random draw from question bank' }
				];
				options.forEach(opt => {
					const option = document.createElement('option');
					option.value = opt.value;
					option.textContent = opt.text;
					select.appendChild(option);
				});

				label.appendChild(input);
				strategyLabel.appendChild(select);
				card.appendChild(label);
				card.appendChild(strategyLabel);
				variantGrid.appendChild(card);

				appState.examTypes.push({ label: input.value, strategy: select.value });

				input.addEventListener('input', (event) => {
					const idx = Number(event.target.dataset.variantIndex);
					appState.examTypes[idx].label = event.target.value.trim();
				});

				select.addEventListener('change', (event) => {
					const idx = Number(event.target.dataset.variantIndex);
					appState.examTypes[idx].strategy = event.target.value;
				});
			}
			refreshVariantSelect();
		}

		function syncQuestionAmount() {
			const amount = Number(document.getElementById('questionAmount').value);
			appState.questionAmount = Number.isFinite(amount) ? amount : null;
		}

		function renderQuestionList() {
			if (!appState.questionBank.length) {
				questionList.innerHTML = '<p class="pill-meta">Aún no se han añadido preguntas.</p>';
				return;
			}
			questionList.innerHTML = '';
			appState.questionBank.forEach((q, idx) => {
				const pill = document.createElement('div');
				pill.className = 'question-pill';
				const info = document.createElement('div');
				info.innerHTML = `<strong>${idx + 1}.</strong> ${q.prompt}`;
				const meta = document.createElement('span');
				meta.className = 'pill-meta';
				meta.textContent = q.type === 'mcq' ? `Opción Múltiple · Correcta ${q.correctOption}` : `Numérica · ${q.numericAnswer}`;
				const removeBtn = document.createElement('button');
				removeBtn.type = 'button';
				removeBtn.className = 'ghost-btn';
				removeBtn.textContent = 'Eliminar';
				removeBtn.addEventListener('click', () => {
					appState.questionBank.splice(idx, 1);
					renderQuestionList();
				});
				pill.appendChild(info);
				pill.appendChild(meta);
				pill.appendChild(removeBtn);
				questionList.appendChild(pill);
			});
		}

		function handleAddQuestion() {
			const prompt = document.getElementById('questionPrompt').value.trim();
			const type = questionTypeSelect.value;
			if (!prompt) {
				alert('Por favor proporciona el enunciado de la pregunta.');
				return;
			}
			if (type === 'mcq') {
				const options = {
					A: document.getElementById('optA').value.trim(),
					B: document.getElementById('optB').value.trim(),
					C: document.getElementById('optC').value.trim(),
					D: document.getElementById('optD').value.trim()
				};
				if (Object.values(options).some(val => !val)) {
					alert('Completa las cuatro opciones para la pregunta de opción múltiple.');
					return;
				}
				const correctOption = document.getElementById('correctOption').value;
				appState.questionBank.push({ type: 'mcq', prompt, options, correctOption });
			} else {
				const numericAnswer = document.getElementById('numericAnswer').value;
				if (numericAnswer === '') {
					alert('Proporciona la respuesta entera.');
					return;
				}
				if (!Number.isInteger(Number(numericAnswer))) {
					alert('Las respuestas numéricas deben ser enteros sin decimales.');
					return;
				}
				appState.questionBank.push({ type: 'numeric', prompt, numericAnswer: Number(numericAnswer) });
			}
			document.getElementById('questionPrompt').value = '';
			document.querySelectorAll('#mcqFields input').forEach(inp => inp.value = '');
			document.getElementById('correctOption').value = 'A';
			document.getElementById('numericAnswer').value = '';
			renderQuestionList();
		}

		function refreshVariantSelect() {
			variantSelect.innerHTML = '';
			if (!appState.examTypes.length) {
				variantSelect.disabled = true;
				requestPdfBtn.disabled = true;
				const option = document.createElement('option');
				option.value = '';
				option.textContent = 'Añade variantes primero';
				variantSelect.appendChild(option);
				return;
			}
			variantSelect.disabled = false;
			requestPdfBtn.disabled = false;
			appState.examTypes.forEach(({ label }) => {
				const option = document.createElement('option');
				option.value = label;
				option.textContent = label;
				variantSelect.appendChild(option);
			});
		}

		function buildJson() {
			syncGeneralInfo();
			syncQuestionAmount();
			const payload = {
				subject: {
					name: appState.subjectName,
					code: appState.subjectCode
				},
				exam: {
					name: appState.examName,
					school: appState.schoolName,
					variants: appState.examTypes,
					questionAmountPerExam: appState.questionAmount
				},
				questionBank: appState.questionBank,
				metadata: {
					generatedAt: new Date().toISOString()
				}
			};
			const jsonText = JSON.stringify(payload, null, 2);
			jsonOutput.textContent = jsonText;
			return jsonText;
		}

		function downloadJson(text) {
			const blob = new Blob([text], { type: 'application/json' });
			const url = URL.createObjectURL(blob);
			const link = document.createElement('a');
			link.href = url;
			link.download = `${appState.subjectCode || 'exam'}-blueprint.json`;
			document.body.appendChild(link);
			link.click();
			document.body.removeChild(link);
			URL.revokeObjectURL(url);
		}

		nextBtn.addEventListener('click', () => {
			if (!validateStep(currentStep)) {
				alert('Por favor completa la información requerida antes de continuar.');
				return;
			}
			if (currentStep === 0) syncGeneralInfo();
			if (currentStep === 2) syncQuestionAmount();
			if (currentStep < steps.length - 1) {
				setStep(currentStep + 1);
			}
		});

		prevBtn.addEventListener('click', () => setStep(currentStep - 1));

		buildVariantsBtn.addEventListener('click', () => {
			const count = Number(document.getElementById('variantCount').value);
			createVariantCards(count);
		});

		questionTypeSelect.addEventListener('change', (event) => {
			const isMcq = event.target.value === 'mcq';
			mcqFields.style.display = isMcq ? 'grid' : 'none';
			numericFields.style.display = isMcq ? 'none' : 'grid';
		});

		addQuestionBtn.addEventListener('click', handleAddQuestion);

		generateJsonBtn.addEventListener('click', () => {
			if (!validateStep(3)) {
				alert('Añade al menos una pregunta antes de generar el JSON.');
				return;
			}
			const json = buildJson();
			jsonOutput.textContent = json;
		}); downloadJsonBtn.addEventListener('click', () => {
			const json = buildJson();
			downloadJson(json);
		});

		requestPdfBtn.addEventListener('click', async () => {
			if (requestPdfBtn.disabled) return;
			if (!validateStep(3)) {
				alert('Completa los datos del asistente y añade preguntas antes de solicitar un PDF.');
				return;
			}
			const variantLabel = variantSelect.value;
			if (!variantLabel) {
				alert('Selecciona una variante de examen primero.');
				return;
			}
			const blueprint = JSON.parse(buildJson());
			pdfStatus.textContent = 'Generando PDF…';
			requestPdfBtn.disabled = true;
			try {
				const response = await fetch(`${getApiBase()}/api/generate-answer-sheet`, {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ blueprint, variantLabel })
				});
				if (!response.ok) {
					throw new Error(await response.text());
				}
				const blob = await response.blob();
				const url = URL.createObjectURL(blob);
				const link = document.createElement('a');
				link.href = url;
				link.download = `${blueprint.subject.code || 'exam'}-${variantLabel}-answer-sheet.pdf`;
				document.body.appendChild(link);
				link.click();
				document.body.removeChild(link);
				URL.revokeObjectURL(url);
				pdfStatus.textContent = 'PDF descargado exitosamente.';
			} catch (error) {
				console.error(error);
				pdfStatus.textContent = 'Error al generar el PDF. Verifica los registros del servidor.';
			} finally {
				requestPdfBtn.disabled = false;
			}
		});

		resetWizardBtn.addEventListener('click', () => {
			if (!confirm('¿Reiniciar el asistente a su estado inicial?')) return;
			document.getElementById('wizardForm').reset();
			variantGrid.innerHTML = '';
			questionList.innerHTML = '<p class="pill-meta">Aún no se han añadido preguntas.</p>';
			jsonOutput.textContent = '// La salida JSON aparecerá aquí.';
			appState.subjectName = '';
			appState.subjectCode = '';
			appState.examName = '';
			appState.schoolName = '';
			appState.examTypes = [];
			appState.questionAmount = null;
			appState.questionBank = [];
			setStep(0);
			refreshVariantSelect();
			pdfStatus.textContent = 'El estado del PDF aparecerá aquí.';
			apiBaseInput.value = defaultApiBase;
		});

		setStep(0);
		createVariantCards(Number(document.getElementById('variantCount').value));
		apiBaseInput.value = defaultApiBase;
		refreshVariantSelect();
	</script>
</body>

</html>